<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio</title>

  <meta name="description" content="Personal portfolio website." />
  <meta name="robots" content="index,follow" />

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: #333;
      background: #fff;
    }

    header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 1.2rem 0;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    nav {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }

    .logo { font-size: 1.25rem; font-weight: 800; letter-spacing: 0.2px; }

    .nav-links { display: flex; gap: 1.5rem; list-style: none; align-items: center; }
    .nav-links a { color: white; text-decoration: none; transition: opacity 0.2s; }
    .nav-links a:hover { opacity: 0.85; }

    .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }

    section { padding: 4rem 0; min-height: 340px; }
    section:nth-child(even) { background: #f8f9fa; }

    h1 { font-size: 2.6rem; margin-bottom: 0.75rem; }
    h2 { font-size: 2rem; margin-bottom: 1.5rem; color: #667eea; }
    h3 { font-size: 1.4rem; margin-bottom: 1rem; color: #555; }

    .hero { text-align: center; padding: 5.5rem 0; }
    .hero p { font-size: 1.1rem; margin: 0 auto 1.8rem auto; max-width: 780px; color: #666; }

    .btn {
      display: inline-block;
      padding: 0.85rem 1.6rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      text-decoration: none;
      border-radius: 10px;
      transition: transform 0.2s;
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.25);
    }
    .btn:hover { transform: translateY(-2px); }

    .sub-actions { display: flex; gap: 0.75rem; justify-content: center; flex-wrap: wrap; margin-top: 0.5rem; }
    .btn.secondary {
      background: #fff;
      color: #667eea;
      border: 1px solid rgba(255,255,255,0.7);
      box-shadow: none;
    }

    .cv-section { display: grid; gap: 2rem; }
    .cv-item {
      background: white;
      padding: 2rem;
      border-radius: 16px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .cv-item h4 { color: #667eea; margin-bottom: 0.5rem; font-size: 1.05rem; }
    .cv-item .date { color: #999; font-size: 0.95rem; margin-bottom: 0.7rem; }
    .cv-entry { margin-top: 1.25rem; }

    .skills { display: flex; flex-wrap: wrap; gap: 0.6rem; margin-top: 0.5rem; }
    .skill-tag { background: #e9ecef; padding: 0.45rem 0.9rem; border-radius: 999px; font-size: 0.92rem; }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }

    .card {
      background: white;
      padding: 1.4rem;
      border-radius: 16px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      transition: transform 0.2s;
    }
    .card:hover { transform: translateY(-4px); }
    .card h4 { color: #667eea; margin-bottom: 0.4rem; }
    .muted { color: #999; font-size: 0.92rem; margin-bottom: 0.8rem; }

    .blog-posts { display: grid; gap: 1.5rem; margin-top: 1.5rem; }
    .blog-post {
      background: white;
      padding: 2rem;
      border-radius: 16px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    .blog-post h3 { color: #667eea; margin-bottom: 0.3rem; }
    .blog-post .meta { color: #999; font-size: 0.9rem; margin-bottom: 1rem; }

    .contact-info { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 1.5rem; }
    .contact-card { background: white; padding: 1.8rem; border-radius: 16px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); text-align: center; }
    .contact-card h3 { color: #667eea; margin-bottom: 0.8rem; }
    .contact-card a { color: #333; text-decoration: none; }
    .contact-card a:hover { color: #667eea; }

    footer { background: #2c3e50; color: white; text-align: center; padding: 2rem 0; }
    .empty-state { text-align: center; color: #999; padding: 1.5rem; font-style: italic; }

    @media (max-width: 768px) {
      nav { padding: 0 1rem; }
      .nav-links { gap: 1rem; font-size: 0.9rem; flex-wrap: wrap; justify-content: flex-end; }
      h1 { font-size: 2rem; }
      h2 { font-size: 1.5rem; }
      section { padding: 3.2rem 0; }
      .hero { padding: 4.5rem 0; }
    }
  </style>
</head>
<body>
<header>
  <nav>
    <div class="logo" id="siteName">Your Name</div>
    <ul class="nav-links">
      <li><a href="#home">Home</a></li>
      <li><a href="#cv">CV</a></li>
      <li><a href="#books">Books</a></li>
      <li><a href="#blog">Blog</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </nav>
</header>

<section id="home" class="hero">
  <div class="container">
    <h1 id="heroName">Welcome to My Portfolio</h1>
    <p id="heroProfession">Loading...</p>

    <div class="sub-actions">
      <a href="#contact" class="btn">Get in Touch</a>
      <a id="resumeBtn" class="btn secondary" href="#" style="display:none;">Download Resume</a>
    </div>
  </div>
</section>

<section id="cv">
  <div class="container">
    <h2>Curriculum Vitae</h2>

    <div class="cv-section">
      <div class="cv-item">
        <h3>Experience</h3>
        <div id="experienceContent"></div>
      </div>

      <div class="cv-item">
        <h3>Education</h3>
        <div id="educationContent"></div>
      </div>

      <div class="cv-item">
        <h3>Skills</h3>
        <div class="skills" id="skillsContent"></div>
      </div>
    </div>
  </div>
</section>

<section id="books">
  <div class="container">
    <h2>Favorite Books</h2>
    <p>Here are some books that have influenced my thinking and I highly recommend:</p>
    <div class="grid" id="booksContent"></div>
  </div>
</section>

<section id="blog">
  <div class="container">
    <h2>Blog Posts</h2>
    <div class="blog-posts" id="blogContent"></div>
  </div>
</section>

<section id="contact">
  <div class="container">
    <h2>Get in Touch</h2>
    <p>Feel free to reach out to me through any of these channels:</p>
    <div class="contact-info" id="contactContent"></div>
  </div>
</section>

<footer>
  <div class="container">
    <p>&copy; 2026 <span id="footerName">Your Name</span>. All rights reserved.</p>
  </div>
</footer>

<script>
  function escapeHtml(str) {
    return String(str ?? "")
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&#039;");
  }

  async function loadWebsiteData() {
    try {
      const res = await fetch("./data/site.json", { cache: "no-store" });
      if (!res.ok) throw new Error(`Failed to load data/site.json (${res.status})`);
      const data = await res.json();
      renderWebsite(data);
    } catch (e) {
      console.error(e);
      loadDefaultData();
      document.getElementById("heroProfession").textContent =
        "Could not load site data. Check data/site.json.";
    }
  }

  function renderWebsite(data) {
    // Profile
    const name = data?.profile?.name || "Your Name";
    document.getElementById("siteName").textContent = name;
    document.getElementById("heroName").textContent = `Welcome, I'm ${name}`;
    document.getElementById("footerName").textContent = name;

    const profession = data?.profile?.profession || "";
    const about = data?.profile?.about || "";
    document.getElementById("heroProfession").textContent =
      [profession, about].filter(Boolean).join(" â€” ") || "Use the admin panel to customize your portfolio";

    // Resume
    const resumeUrl = data?.profile?.resumeUrl || "";
    const resumeBtn = document.getElementById("resumeBtn");
    if (resumeUrl) {
      resumeBtn.href = resumeUrl;
      resumeBtn.style.display = "inline-block";
    } else {
      resumeBtn.style.display = "none";
    }

    // Experience
    const expContent = document.getElementById("experienceContent");
    const exp = Array.isArray(data?.experience) ? data.experience : [];
    expContent.innerHTML = exp.length
      ? exp.map(x => `
        <div class="cv-entry">
          <h4>${escapeHtml(x.title)}</h4>
          <div class="date">${escapeHtml(x.company)} | ${escapeHtml(x.duration)}</div>
          <p>${escapeHtml(x.description)}</p>
        </div>
      `).join("")
      : '<p class="empty-state">No experience added yet.</p>';

    // Education
    const eduContent = document.getElementById("educationContent");
    const edu = Array.isArray(data?.education) ? data.education : [];
    eduContent.innerHTML = edu.length
      ? edu.map(x => `
        <div class="cv-entry">
          <h4>${escapeHtml(x.degree)}</h4>
          <div class="date">${escapeHtml(x.institution)} | ${escapeHtml(x.duration)}</div>
          <p>${escapeHtml(x.description)}</p>
        </div>
      `).join("")
      : '<p class="empty-state">No education added yet.</p>';

    // Skills
    const skillsContent = document.getElementById("skillsContent");
    const skills = Array.isArray(data?.skills) ? data.skills : [];
    skillsContent.innerHTML = skills.length
      ? skills.map(s => `<span class="skill-tag">${escapeHtml(s)}</span>`).join("")
      : '<p class="empty-state">No skills added yet.</p>';

    // Books
    const booksContent = document.getElementById("booksContent");
    const books = Array.isArray(data?.books) ? data.books : [];
    booksContent.innerHTML = books.length
      ? books.map(b => `
        <div class="card">
          <h4>${escapeHtml(b.title)}</h4>
          <div class="muted">by ${escapeHtml(b.author)}</div>
          <p>${escapeHtml(b.review)}</p>
        </div>
      `).join("")
      : '<p class="empty-state">No books added yet.</p>';

    // Blog Posts
    const blogContent = document.getElementById("blogContent");
    const posts = Array.isArray(data?.blog) ? data.blog : [];
    blogContent.innerHTML = posts.length
      ? posts.map(p => `
        <article class="blog-post">
          <h3>${escapeHtml(p.title)}</h3>
          <div class="meta">Published on ${escapeHtml(p.date)}</div>
          <p>${escapeHtml(p.content)}</p>
        </article>
      `).join("")
      : '<p class="empty-state">No blog posts yet.</p>';

    // Contact
    const contactContent = document.getElementById("contactContent");
    const c = data?.contact || {};
    const cards = [];

    if (c.email) cards.push(contactCard("Email", `<a href="mailto:${escapeHtml(c.email)}">${escapeHtml(c.email)}</a>`));
    if (c.linkedin) cards.push(contactCard("LinkedIn", `<a href="${escapeHtml(c.linkedin)}" target="_blank" rel="noreferrer">Open LinkedIn</a>`));
    if (c.github) cards.push(contactCard("GitHub", `<a href="${escapeHtml(c.github)}" target="_blank" rel="noreferrer">Open GitHub</a>`));
    if (c.twitter) cards.push(contactCard("Twitter/X", `<a href="https://twitter.com/${escapeHtml(c.twitter)}" target="_blank" rel="noreferrer">@${escapeHtml(c.twitter)}</a>`));

    contactContent.innerHTML = cards.length
      ? cards.join("")
      : '<p class="empty-state">No contact information added yet.</p>';
  }

  function contactCard(title, bodyHtml) {
    return `
      <div class="contact-card">
        <h3>${escapeHtml(title)}</h3>
        ${bodyHtml}
      </div>
    `;
  }

  function loadDefaultData() {
    document.getElementById('heroProfession').textContent = 'Use the admin panel to customize your portfolio';
    document.getElementById('experienceContent').innerHTML = '<p class="empty-state">No experience added yet.</p>';
    document.getElementById('educationContent').innerHTML = '<p class="empty-state">No education added yet.</p>';
    document.getElementById('skillsContent').innerHTML = '<p class="empty-state">No skills added yet.</p>';
    document.getElementById('booksContent').innerHTML = '<p class="empty-state">No books added yet.</p>';
    document.getElementById('blogContent').innerHTML = '<p class="empty-state">No blog posts yet.</p>';
    document.getElementById('contactContent').innerHTML = '<p class="empty-state">No contact information added yet.</p>';
  }

  window.onload = loadWebsiteData;
</script>
</body>
</html>
